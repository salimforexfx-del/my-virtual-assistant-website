<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Salim-VA | Professional Virtual Assistant Services</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --primary:#4e46e5; --accent:#f43f5e; --dark:#0f172a; --light:#f8fafc; --muted:#64748b;
      --card-radius:12px; --container: 1100px;
    }
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Arial; margin:0; color:var(--dark); background:var(--light); -webkit-font-smoothing:antialiased;}
    .container{max-width:var(--container); margin:0 auto; padding:0 20px;}
    header{position:sticky; top:0; background:rgba(255,255,255,0.95); backdrop-filter: blur(6px); box-shadow:0 2px 10px rgba(0,0,0,0.06); z-index:40;}
    .nav{display:flex; align-items:center; justify-content:space-between; padding:18px 0;}
    .logo{font-weight:800; color:var(--primary); text-decoration:none; display:flex; gap:10px; align-items:center;}
    .navlinks{display:flex; gap:26px; list-style:none; margin:0; padding:0;}
    .navlinks a{color:var(--dark); text-decoration:none; font-weight:600;}
    .hero{background:linear-gradient(135deg,var(--primary),#3730a3); color:white; padding:100px 0; position:relative;}
    .hero-content{max-width:720px}
    h1{font-family:Montserrat,Inter,system-ui; font-size:2.8rem; margin:0 0 12px;}
    p.lead{opacity:.95; margin:0 0 20px;}
    .btn{display:inline-block; padding:12px 20px; border-radius:10px; background:var(--primary); color:#fff; text-decoration:none; font-weight:700; border:none; cursor:pointer;}
    .btn.secondary{background:transparent; color:#fff; border:2px solid rgba(255,255,255,0.12);}
    section{padding:90px 0;}
    .section-header{text-align:center; margin-bottom:30px;}
    .section-header h2{font-size:2rem; margin-bottom:8px}
    .services-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;}
    .card{background:#fff; border-radius:var(--card-radius); padding:24px; box-shadow:0 10px 30px rgba(2,6,23,0.06); border:1px solid rgba(2,6,23,0.03);}
    .service-icon{width:64px; height:64px; border-radius:12px; display:flex; align-items:center; justify-content:center; color:white; background:linear-gradient(135deg,var(--primary),#3730a3); margin-bottom:14px;}
    .price{font-weight:800; color:var(--primary); font-size:1.5rem}
    /* Payment area styles */
    .payment-container { display:grid; grid-template-columns: 1fr 380px; gap:28px; align-items:start; }
    @media (max-width: 980px){ .payment-container{grid-template-columns:1fr} .hero{padding:70px 0} h1{font-size:2rem}}
    .payment-form{padding:24px; border-radius:12px; background:#fff; box-shadow:0 18px 40px rgba(2,6,23,0.06); }
    .form-row{margin-bottom:14px}
    label{display:block; margin-bottom:8px; font-weight:600;}
    input[type="text"], input[type="email"], input[type="number"], select, textarea {
      width:100%; padding:12px 14px; border-radius:10px; border:1px solid #e6e7ee; font-size:1rem;
    }
    textarea{min-height:92px; resize:vertical}
    .muted{color:var(--muted); font-size:.95rem}
    .summary-card{padding:18px; background:linear-gradient(180deg,#fff,#fbfcff); border-radius:12px; border:1px solid rgba(2,6,23,0.04)}
    .summary-line{display:flex; justify-content:space-between; margin:8px 0}
    .summary-total{display:flex; justify-content:space-between; margin-top:14px; padding-top:10px; border-top:1px solid #eef2ff; font-weight:800; font-size:1.05rem}
    .payment-methods{display:flex; gap:10px; margin-top:12px}
    .pm{flex:1; padding:12px; border-radius:10px; border:1px solid #e6e7ee; display:flex; gap:10px; align-items:center; cursor:pointer; background:#fff}
    .pm.selected{border-color:var(--primary); box-shadow:0 8px 24px rgba(78,70,229,0.06)}
    .pm .ico{width:44px; height:44px; display:flex; align-items:center; justify-content:center; border-radius:8px; background:linear-gradient(135deg,var(--primary),#3730a3); color:white}
    .feedback{margin-top:12px}
    .alert{padding:12px 14px; border-radius:10px}
    .alert.success{background:#ecfdf5; color:#065f46; border:1px solid #bbf7d0}
    .alert.error{background:#fff1f2; color:#991b1b; border:1px solid #fecaca}
    footer{background:#0f172a; color:#fff; padding:36px 0; text-align:center}
    .small{font-size:0.9rem; color:var(--muted)}
    /* small input helper / formatting */
    .row{display:flex; gap:12px}
    .row > *{flex:1}
    .center{display:flex; align-items:center; gap:10px}
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container nav">
      <a class="logo" href="#"><i class="fas fa-headset"></i> Salim-VA</a>
      <nav>
        <ul class="navlinks">
          <li><a href="#home">Home</a></li>
          <li><a href="#services">Services</a></li>
          <li><a href="#payment">Book Now</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#testimonials">Testimonials</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" id="home">
    <div class="container">
      <div class="hero-content">
        <h1>Professional Virtual Assistant Services</h1>
        <p class="lead">Boost your productivity with expert administrative, creative, and technical support tailored to your business needs. Prices shown in <strong>USD</strong> — final charge is in <strong>KES</strong> (converted live).</p>
        <div style="margin-top:18px">
          <a class="btn" href="#payment">Book Now</a>
          <a class="btn secondary" href="#services">View Services</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Services -->
  <section id="services">
    <div class="container section-header">
      <h2>My Services</h2>
      <p class="muted">Comprehensive virtual assistance solutions designed to streamline your workflow and enhance productivity.</p>
    </div>
    <div class="container">
      <div class="services-grid">
        <div class="card">
          <div class="service-icon"><i class="fas fa-calendar-alt"></i></div>
          <h3>Administrative Support</h3>
          <p class="small muted">Email & calendar management, data entry, travel and docs.</p>
          <div style="margin-top:12px" class="price">$25/hr</div>
        </div>
        <div class="card">
          <div class="service-icon"><i class="fas fa-paint-brush"></i></div>
          <h3>Graphic Design</h3>
          <p class="small muted">Logos, social graphics and branding.</p>
          <div style="margin-top:12px" class="price">$45/hr</div>
        </div>
        <div class="card">
          <div class="service-icon"><i class="fas fa-file-alt"></i></div>
          <h3>Content Creation</h3>
          <p class="small muted">Blog posts, newsletters & email campaigns.</p>
          <div style="margin-top:12px" class="price">$35/hr</div>
        </div>
        <div class="card">
          <div class="service-icon"><i class="fas fa-chart-line"></i></div>
          <h3>Social Media Management</h3>
          <p class="small muted">Strategy, content calendar, engagement.</p>
          <div style="margin-top:12px" class="price">$40/hr</div>
        </div>
        <div class="card">
          <div class="service-icon"><i class="fas fa-shopping-cart"></i></div>
          <h3>E-commerce Support</h3>
          <p class="small muted">Listings, inventory & order support.</p>
          <div style="margin-top:12px" class="price">$30/hr</div>
        </div>
        <div class="card">
          <div class="service-icon"><i class="fas fa-video"></i></div>
          <h3>Video Editing</h3>
          <p class="small muted">YouTube & social clips editing.</p>
          <div style="margin-top:12px" class="price">$50/hr</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Payment / Booking -->
  <section id="payment">
    <div class="container">
      <div class="section-header">
        <h2>Book Your Service</h2>
        <p class="muted">Select a service, choose hours and pay securely. Prices are in USD; Paystack charges in KES (converted live).</p>
      </div>

      <div class="payment-container">
        <!-- Left: form -->
        <div class="payment-form card" aria-labelledby="booking-form">
          <h3 id="booking-form">Service Selection</h3>

          <div id="exchange-note" class="small muted" style="margin-bottom:12px">Fetching live USD→KES rate…</div>

          <div class="form-row">
            <label for="customer-email">Your Email</label>
            <input id="customer-email" type="email" placeholder="you@company.com" required autocomplete="email" />
          </div>

          <div class="form-row">
            <label for="service-select">Choose Service (USD/hr)</label>
            <select id="service-select" aria-label="Service" required>
              <!-- USD rates (base). KES shown live in JS update -->
              <option value="">-- Select service --</option>
              <option value="admin" data-usd="25">Administrative Support — $25 / hr</option>
              <option value="design" data-usd="45">Graphic Design — $45 / hr</option>
              <option value="content" data-usd="35">Content Creation — $35 / hr</option>
              <option value="social" data-usd="40">Social Media Management — $40 / hr</option>
              <option value="ecommerce" data-usd="30">E-commerce Support — $30 / hr</option>
              <option value="video" data-usd="50">Video Editing — $50 / hr</option>
            </select>
          </div>

          <div class="form-row">
            <label for="hours-input">Number of Hours</label>
            <input id="hours-input" type="number" min="1" value="1" inputmode="numeric" pattern="[0-9]*" required />
            <div class="small muted">Enter hours as a whole number (e.g., 1, 2, 3).</div>
          </div>

          <div class="form-row">
            <label for="date-input">Preferred Date</label>
            <input id="date-input" type="date" required />
            <div class="small muted">Pick a date that works for you.</div>
          </div>

          <div style="margin-top:10px">
            <div class="small muted">Payment Method</div>
            <div class="payment-methods" role="radiogroup" aria-label="Payment method">
              <div class="pm selected" data-method="paypal" role="radio" aria-checked="true">
                <div class="ico"><i class="fab fa-paypal"></i></div><div>PayPal</div>
              </div>
              <div class="pm" data-method="card" role="radio" aria-checked="false">
                <div class="ico"><i class="fas fa-credit-card"></i></div><div>Credit / Debit Card (Paystack)</div>
              </div>
            </div>
          </div>

          <div style="margin-top:16px" class="summary-card">
            <div class="summary-line"><div>Rate</div><div id="display-rate">—</div></div>
            <div class="summary-line"><div>Hours</div><div id="display-hours">1</div></div>
            <div class="summary-line"><div>Total (USD)</div><div id="display-usd">—</div></div>
            <div class="summary-line"><div>Approx. (KES)</div><div id="display-kes">—</div></div>
            <div class="summary-total"><div>To be charged</div><div id="display-charge">—</div></div>
            <div id="pay-feedback" class="feedback" aria-live="polite"></div>
          </div>

          <div style="margin-top:18px">
            <button id="complete-btn" class="btn" type="button">Complete Payment</button>
          </div>

          <div style="margin-top:12px" class="small muted">Secure payments powered by Paystack. Card details entered inside Paystack's secure popup — not stored on this site.</div>
        </div>

        <!-- Right: helpful info / contact -->
        <aside>
          <div class="card">
            <h4>Need help?</h4>
            <p class="muted">If you have questions before booking, send a message via the contact form below or email <strong>salim.virtualassistant@gmail.com</strong>.</p>
            <hr style="margin:12px 0"/>
            <h4>Prices shown</h4>
            <p class="muted">All base prices are USD/hour. The KES amounts are calculated live using current exchange rate and shown as an approximate equivalent. The final charge will be in KES.</p>
            <hr style="margin:12px 0"/>
            <div class="small muted">Contact: +1 (555) 123-4567</div>
          </div>

          <div style="height:16px"></div>

          <!-- Netlify contact form (kept intact) -->
          <div class="card">
            <h4>Contact</h4>
            <form name="contact" method="POST" data-netlify="true" data-netlify-honeypot="bot-field" action="/thank-you">
              <input type="hidden" name="form-name" value="contact">
              <p class="hidden" style="display:none"><label>Don’t fill: <input name="bot-field"></label></p>
              <label>Name <input type="text" name="name" required></label>
              <label>Email <input type="email" name="email" required></label>
              <label>Message <textarea name="message" required></textarea></label>
              <button class="btn" type="submit" style="width:100%; margin-top:8px">Send Message</button>
            </form>
          </div>
        </aside>
      </div>
    </div>
  </section>

  <!-- About -->
  <section id="about">
    <div class="container section-header">
      <h2>About Me</h2>
      <p class="muted">With 5+ years working with businesses worldwide — administrative, design and content support tailored to you.</p>
    </div>
  </section>

  <!-- Testimonials -->
  <section id="testimonials">
    <div class="container section-header">
      <h2>Client Testimonials</h2>
      <p class="muted">What clients say about working with me.</p>
    </div>
  </section>

  <!-- Contact / Footer -->
  <footer>
    <div class="container">
      <div class="small">© <span id="yr"></span> Salim-VA — Remote - Worldwide</div>
    </div>
  </footer>

  <!-- Paystack inline -->
  <script src="https://js.paystack.co/v1/inline.js"></script>

  <script>
    // ---- Config (edit only if needed) ----
    const PAYSTACK_PUBLIC_KEY = 'pk_live_4842a6f67cbfb6c50efc62c39d25c65c18c09577'; // your live key
    const EXCHANGE_API = 'https://api.exchangerate.host/latest?base=USD&symbols=KES';

    // Service USD price map (base source)
    const SERVICE_USD = {
      admin: 25,
      design: 45,
      content: 35,
      social: 40,
      ecommerce: 30,
      video: 50
    };

    // ---- Elements ----
    const selService = document.getElementById('service-select');
    const hoursInput = document.getElementById('hours-input');
    const dateInput = document.getElementById('date-input');
    const emailInput = document.getElementById('customer-email');
    const displayRate = document.getElementById('display-rate');
    const displayHours = document.getElementById('display-hours');
    const displayUSD = document.getElementById('display-usd');
    const displayKES = document.getElementById('display-kes');
    const displayCharge = document.getElementById('display-charge');
    const feedbackEl = document.getElementById('pay-feedback');
    const exchangeNote = document.getElementById('exchange-note');
    const pmEls = document.querySelectorAll('.pm');

    // variables
    let liveRate = null; // KES per 1 USD
    let selectedMethod = 'paypal'; // default

    document.getElementById('yr').textContent = new Date().getFullYear();

    // fetch live rate (retry gracefully)
    async function fetchRate(){
      exchangeNote.textContent = 'Fetching live USD → KES rate…';
      try {
        const r = await fetch(EXCHANGE_API, {cache: 'no-store'});
        if(!r.ok) throw new Error('Rate fetch failed');
        const j = await r.json();
        if(j && j.rates && j.rates.KES){
          liveRate = Number(j.rates.KES);
          exchangeNote.textContent = `1 USD ≈ KES ${liveRate.toLocaleString(undefined,{maximumFractionDigits:2})} (live)`;
          updateAllDisplays();
        } else {
          throw new Error('Unexpected rate response');
        }
      } catch(err){
        console.warn('Exchange rate error', err);
        exchangeNote.textContent = 'Unable to fetch live rate — approximate KES will be used. (Refresh to retry)';
        // fallback: approximate if you want (here we leave liveRate null)
        liveRate = null;
        updateAllDisplays();
      }
    }

    // update UI displays
    function updateAllDisplays(){
      const service = selService.value;
      const hours = Math.max(1, parseInt(hoursInput.value) || 1);
      displayHours.textContent = hours;
      if(!service){ displayRate.textContent = '-'; displayUSD.textContent='-'; displayKES.textContent='-'; displayCharge.textContent='-'; return; }
      const usdRate = SERVICE_USD[service] || 0;
      const usdTotal = usdRate * hours;
      const kesTotal = liveRate ? (usdTotal * liveRate) : (usdTotal * 140); // if no live rate, show rough estimate 140 KES per USD
      displayRate.textContent = `$${usdRate.toFixed(2)} / hr`;
      displayUSD.textContent = `$${usdTotal.toFixed(2)}`;
      displayKES.textContent = `≈ KES ${Math.round(kesTotal).toLocaleString()}`;
      displayCharge.textContent = `KES ${Math.round(kesTotal).toLocaleString()}`;
    }

    // attach events
    selService.addEventListener('change', updateAllDisplays);
    hoursInput.addEventListener('input', function(){
      // sanitize to digits only and min 1
      this.value = this.value.replace(/[^\d]/g,'');
      if(this.value === '' || Number(this.value) < 1) this.value = 1;
      updateAllDisplays();
    });
    hoursInput.addEventListener('blur', updateAllDisplays);
    dateInput.addEventListener('change', updateAllDisplays);

    // payment-method toggles
    pmEls.forEach(el => {
      el.addEventListener('click', () => {
        pmEls.forEach(x => { x.classList.remove('selected'); x.setAttribute('aria-checked','false')});
        el.classList.add('selected'); el.setAttribute('aria-checked','true');
        selectedMethod = el.dataset.method;
      });
    });

    // small helper validators
    function validEmail(e){ return typeof e === 'string' && /^\S+@\S+\.\S+$/.test(e); }
    function formatNumber(n){ return Number(n).toLocaleString(); }

    // Complete payment handler
    document.getElementById('complete-btn').addEventListener('click', async function(){
      feedbackEl.innerHTML = '';
      // basic validation
      const service = selService.value;
      const hours = Math.max(1, parseInt(hoursInput.value) || 1);
      const dateVal = dateInput.value;
      const email = (emailInput.value || '').trim();

      if(!service){ feedbackEl.innerHTML = `<div class="alert error">Please select a service.</div>`; selService.focus(); return; }
      if(!dateVal){ feedbackEl.innerHTML = `<div class="alert error">Please choose a preferred date.</div>`; dateInput.focus(); return; }
      if(!validEmail(email)){ feedbackEl.innerHTML = `<div class="alert error">Please enter a valid email address.</div>`; emailInput.focus(); return; }

      // compute totals
      const usdRate = SERVICE_USD[service];
      const usdTotal = usdRate * hours;
      // if liveRate not fetched, attempt to fetch now (so we don't charge wrong KES)
      if(!liveRate){
        await fetchRate();
        if(!liveRate){
          feedbackEl.innerHTML = `<div class="alert error">Unable to fetch exchange rate. Please try again in a moment (refresh may help).</div>`;
          return;
        }
      }
      const kesTotal = Math.round(usdTotal * liveRate);

      // If user selected PayPal (placeholder) show message and return
      if(selectedMethod === 'paypal'){
        feedbackEl.innerHTML = `<div class="alert error">PayPal checkout is not configured yet. Please select Credit Card (Paystack) to pay now.</div>`;
        return;
      }

      // Launch Paystack inline
      try {
        // open Paystack popup
        const handler = PaystackPop.setup({
          key: PAYSTACK_PUBLIC_KEY,
          email: email,
          amount: kesTotal * 100, // minor unit (cents)
          currency: 'KES',
          ref: 'SALIM_' + Date.now(),
          metadata: {
            custom_fields: [
              { display_name: 'Service', variable_name: 'service', value: service },
              { display_name: 'Hours', variable_name: 'hours', value: String(hours) },
              { display_name: 'Date', variable_name: 'date', value: dateVal }
            ]
          },
          callback: function(response){
            // redirect to thank-you with details encoded in query
            const params = new URLSearchParams({
              ref: response.reference,
              service: service,
              hours: String(hours),
              usd: usdTotal.toFixed(2),
              kes: String(kesTotal),
              email: email
            });
            window.location.href = '/thank-you.html?' + params.toString();
          },
          onClose: function(){
            feedbackEl.innerHTML = `<div class="alert error">Payment popup closed before completion. You can try again.</div>`;
            window.scrollTo({top: document.getElementById('payment').offsetTop - 20, behavior:'smooth'});
          }
        });
        handler.openIframe();
      } catch(err){
        console.error('Paystack error', err);
        feedbackEl.innerHTML = `<div class="alert error">Payment could not start. Please refresh and try again.</div>`;
      }
    });

    // initial fetch & UI init
    (async function init(){
      await fetchRate();
      updateAllDisplays();
      // set min date to today
      const today = new Date().toISOString().split('T')[0];
      dateInput.min = today;
    })();
  </script>
</body>
</html>
